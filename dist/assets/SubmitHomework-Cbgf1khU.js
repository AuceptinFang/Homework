import{d as q,r as c,a as E,c as F,b as t,w as l,e as o,h as n,v as D,k as u,n as N,y as R,E as _,u as T,x as H,g as M,q as P}from"./index-D9pYu0IR.js";const U={class:"submit-container"},$={class:"header-content"},A={class:"user-info"},L={class:"card-header"},j=q({__name:"SubmitHomework",setup(z){const p=T(),s=c(),g=c(localStorage.getItem("username")||""),a=E({title:"",description:"",file:null}),v={title:[{required:!0,message:"请输入作业标题",trigger:"blur"},{min:2,max:50,message:"标题长度应在2到50个字符之间",trigger:"blur"}],description:[{required:!0,message:"请输入作业描述",trigger:"blur"},{min:10,max:500,message:"描述长度应在10到500个字符之间",trigger:"blur"}],file:[{required:!0,message:"请上传作业文件",trigger:"change"}]},b=r=>{if(r.raw){if(r.raw.type!=="application/pdf")return _.error("只能上传PDF文件！"),!1;a.file=r.raw}},x=async()=>{s.value&&await s.value.validate(r=>{r&&(_.success("作业提交成功！"),p.push("/dashboard"))})},k=()=>{s.value&&(s.value.resetFields(),a.file=null)},w=()=>{H.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),localStorage.removeItem("isAdmin"),localStorage.removeItem("username"),p.push("/")})};return(r,e)=>{const i=o("el-button"),y=o("el-header"),f=o("el-input"),d=o("el-form-item"),V=o("el-icon"),C=o("el-upload"),S=o("el-form"),B=o("el-card"),h=o("el-main"),I=o("el-container");return M(),F("div",U,[t(I,null,{default:l(()=>[t(y,null,{default:l(()=>[n("div",$,[e[4]||(e[4]=n("h2",null,"作业提交系统",-1)),n("div",A,[n("span",null,D(g.value),1),t(i,{type:"text",onClick:w},{default:l(()=>e[3]||(e[3]=[u("退出登录")])),_:1})])])]),_:1}),t(h,null,{default:l(()=>[t(B,null,{header:l(()=>[n("div",L,[e[6]||(e[6]=n("span",null,"提交作业",-1)),t(i,{onClick:e[0]||(e[0]=m=>r.$router.push("/dashboard"))},{default:l(()=>e[5]||(e[5]=[u("返回")])),_:1})])]),default:l(()=>[t(S,{ref_key:"formRef",ref:s,model:a,rules:v,"label-width":"100px"},{default:l(()=>[t(d,{label:"作业标题",prop:"title"},{default:l(()=>[t(f,{modelValue:a.title,"onUpdate:modelValue":e[1]||(e[1]=m=>a.title=m),placeholder:"请输入作业标题"},null,8,["modelValue"])]),_:1}),t(d,{label:"作业描述",prop:"description"},{default:l(()=>[t(f,{modelValue:a.description,"onUpdate:modelValue":e[2]||(e[2]=m=>a.description=m),type:"textarea",rows:"4",placeholder:"请输入作业描述"},null,8,["modelValue"])]),_:1}),t(d,{label:"作业文件",prop:"file"},{default:l(()=>[t(C,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"on-change":b,accept:".pdf"},{tip:l(()=>e[7]||(e[7]=[n("div",{class:"el-upload__tip"}," 只能上传 PDF 文件 ",-1)])),default:l(()=>[t(V,{class:"el-icon--upload"},{default:l(()=>[t(N(R))]),_:1}),e[8]||(e[8]=n("div",{class:"el-upload__text"},[u(" 将文件拖到此处，或"),n("em",null,"点击上传")],-1))]),_:1})]),_:1}),t(d,null,{default:l(()=>[t(i,{type:"primary",onClick:x},{default:l(()=>e[9]||(e[9]=[u("提交")])),_:1}),t(i,{onClick:k},{default:l(()=>e[10]||(e[10]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})])}}}),J=P(j,[["__scopeId","data-v-6d7ab3fd"]]);export{J as default};

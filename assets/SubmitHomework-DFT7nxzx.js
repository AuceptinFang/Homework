import{d as e,r as l,a,c as t,b as r,w as o,e as s,g as u,h as d,v as i,k as n,n as c,y as p,E as m,u as f,x as g,q as _}from"./index-DkYUfAqw.js";const h={class:"submit-container"},v={class:"header-content"},b={class:"user-info"},x={class:"card-header"},w=_(e({__name:"SubmitHomework",setup(e){const _=f(),w=l(),y=l(localStorage.getItem("username")||""),k=a({title:"",description:"",file:null}),V={title:[{required:!0,message:"请输入作业标题",trigger:"blur"},{min:2,max:50,message:"标题长度应在2到50个字符之间",trigger:"blur"}],description:[{required:!0,message:"请输入作业描述",trigger:"blur"},{min:10,max:500,message:"描述长度应在10到500个字符之间",trigger:"blur"}],file:[{required:!0,message:"请上传作业文件",trigger:"change"}]},I=e=>{if(e.raw){if("application/pdf"!==e.raw.type)return m.error("只能上传PDF文件！"),!1;k.file=e.raw}},S=async()=>{w.value&&await w.value.validate((e=>{e&&(m.success("作业提交成功！"),_.push("/dashboard"))}))},q=()=>{w.value&&(w.value.resetFields(),k.file=null)},C=()=>{g.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{localStorage.removeItem("token"),localStorage.removeItem("isAdmin"),localStorage.removeItem("username"),_.push("/")}))};return(e,l)=>{const a=s("el-button"),m=s("el-header"),f=s("el-input"),g=s("el-form-item"),_=s("el-icon"),F=s("el-upload"),B=s("el-form"),D=s("el-card"),P=s("el-main"),T=s("el-container");return u(),t("div",h,[r(T,null,{default:o((()=>[r(m,null,{default:o((()=>[d("div",v,[l[4]||(l[4]=d("h2",null,"作业提交系统",-1)),d("div",b,[d("span",null,i(y.value),1),r(a,{type:"text",onClick:C},{default:o((()=>l[3]||(l[3]=[n("退出登录")]))),_:1})])])])),_:1}),r(P,null,{default:o((()=>[r(D,null,{header:o((()=>[d("div",x,[l[6]||(l[6]=d("span",null,"提交作业",-1)),r(a,{onClick:l[0]||(l[0]=l=>e.$router.push("/dashboard"))},{default:o((()=>l[5]||(l[5]=[n("返回")]))),_:1})])])),default:o((()=>[r(B,{ref_key:"formRef",ref:w,model:k,rules:V,"label-width":"100px"},{default:o((()=>[r(g,{label:"作业标题",prop:"title"},{default:o((()=>[r(f,{modelValue:k.title,"onUpdate:modelValue":l[1]||(l[1]=e=>k.title=e),placeholder:"请输入作业标题"},null,8,["modelValue"])])),_:1}),r(g,{label:"作业描述",prop:"description"},{default:o((()=>[r(f,{modelValue:k.description,"onUpdate:modelValue":l[2]||(l[2]=e=>k.description=e),type:"textarea",rows:"4",placeholder:"请输入作业描述"},null,8,["modelValue"])])),_:1}),r(g,{label:"作业文件",prop:"file"},{default:o((()=>[r(F,{class:"upload-demo",drag:"",action:"#","auto-upload":!1,"on-change":I,accept:".pdf"},{tip:o((()=>l[7]||(l[7]=[d("div",{class:"el-upload__tip"}," 只能上传 PDF 文件 ",-1)]))),default:o((()=>[r(_,{class:"el-icon--upload"},{default:o((()=>[r(c(p))])),_:1}),l[8]||(l[8]=d("div",{class:"el-upload__text"},[n(" 将文件拖到此处，或"),d("em",null,"点击上传")],-1))])),_:1})])),_:1}),r(g,null,{default:o((()=>[r(a,{type:"primary",onClick:S},{default:o((()=>l[9]||(l[9]=[n("提交")]))),_:1}),r(a,{onClick:q},{default:o((()=>l[10]||(l[10]=[n("重置")]))),_:1})])),_:1})])),_:1},8,["model"])])),_:1})])),_:1})])),_:1})])}}}),[["__scopeId","data-v-6d7ab3fd"]]);export{w as default};
